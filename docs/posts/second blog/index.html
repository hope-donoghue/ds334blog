<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Hope Donoghue">
<meta name="dcterms.date" content="2024-02-17">

<title>ds334blog - Premier League Investigation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">ds334blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Premier League Investigation</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">soccer</div>
                <div class="quarto-category">visualizations</div>
                <div class="quarto-category">premier league</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Hope Donoghue </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 17, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="premier-league-investigation" class="level1">
<h1>Premier League Investigation</h1>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Hello, welcome back! As an avid Premier League fan myself, I could not pass up the opportunity to investigate some Premier League data from the 2021-2022 season. This was a memorable season as the title race came down to the final match day with Manchester City claiming the crown over Liverpool by 1 point! The data set comes from Tidy Tuesday’s post on April 4, 2023 and it contains 380 observations. Each season consists of 380 games, where each of the 20 teams play 38 games (every team plays each other both home and away). The bottom three teams that get the lowest amount of points get relegated to the Championship League, which is the league below the Premier League. In this blog post, I will be focusing on visualizing statistics relating to goals! Follow along as I explore how many goals were scored each month, which teams scored the most goals, which teams gave up the most goals and which teams had the highest shot conversion rates!</p>
<p><a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2023/2023-04-04/readme.md"> Click here for data set </a></p>
<p>The variables I will be investigating are:</p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>variables</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>team</td>
<td>the team name</td>
</tr>
<tr class="even">
<td>month</td>
<td>the month the game took place in</td>
</tr>
<tr class="odd">
<td>goals</td>
<td>the number of goals a team scores in a match</td>
</tr>
<tr class="even">
<td>goals_against</td>
<td>the number of goals a team gives up in a match</td>
</tr>
<tr class="odd">
<td>shots</td>
<td>the number of shots a team has in a match</td>
</tr>
<tr class="even">
<td>shots_on_target</td>
<td>the number of shots on goal that a team has in a match</td>
</tr>
</tbody>
</table>
</section>
<section id="total-goals-scored-per-month" class="level2">
<h2 class="anchored" data-anchor-id="total-goals-scored-per-month">Total Goals Scored Per Month</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This lollipop plot displays in chronological order the months in the season and the total goals scored in that month by all of the teams. The season starts in early August and ends in early May. It is clear from the plot that December was the month with the highest number of goals scored at 104. April was close behind in second place with 100 goals scored. I am not surprised that those two months had the highest number of goals scored. December has the highest number of games played in a month since it is the festive period with the holidays, so with more games there is the opportunity to score more goals. Additionally, I hypothesize that a lot of goals were scored in April because it is almost the end of the season and the regulation battle along with the final push for the championship kicks in and teams are extra motivated to score more goals. From the plot, we also see that five months of the season (August, September, November, January and March) had roughly the same number of goals scored around 60 goals. This is interesting and makes me wonder whether the high number of goals scored in December and April are unusual or typical in a given season. This would be interesting to further investigate with data from past seasons!</p>
</section>
<section id="average-goals-scored-per-game-by-team" class="level2">
<h2 class="anchored" data-anchor-id="average-goals-scored-per-game-by-team">Average Goals Scored per Game by Team</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This error bar plot shows the average goals scored per game by each team in the Premier League season in 2021-2022. We see that Manchester City and Liverpool lead the league with approximately over 2.5 goals scored per game. This plot is reflective of the final results from the season because Manchester City came in first place and Liverpool came in second place. It seems like for the 2021-2022 season, teams needed to average scoring at least 1 goal per game to avoid regulation. The bottom three teams averaged scoring less than 1 goal per game and consequently they got relegated to the Championship League.</p>
</section>
<section id="average-goals-conceded-per-game-by-team" class="level2">
<h2 class="anchored" data-anchor-id="average-goals-conceded-per-game-by-team">Average Goals Conceded per Game by Team</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This error bar plot depicts the average number of goals that a team concedes per game in the 2021-2022 season. From the plot, we see that Norwich gave up the most goals per game with approximately 2.25 goals. It is not surprising that this plot is opposite to the plot above that shows the average number of goals that a team scores in a game. We see that the teams that got relegated had higher average number of goals conceded per game, while Manchester City who won the league conceded on average the fewest amount of goals in the league.</p>
</section>
<section id="shot-conversion-rate" class="level2">
<h2 class="anchored" data-anchor-id="shot-conversion-rate">Shot Conversion Rate</h2>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Team</th>
<th style="text-align: right;">Total Goals</th>
<th style="text-align: right;">Total Shots on Target</th>
<th style="text-align: right;">ConversionRate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Man City</td>
<td style="text-align: right;">99</td>
<td style="text-align: right;">254</td>
<td style="text-align: right;">38.98</td>
</tr>
<tr class="even">
<td style="text-align: left;">West Ham</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">158</td>
<td style="text-align: right;">37.97</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Liverpool</td>
<td style="text-align: right;">94</td>
<td style="text-align: right;">256</td>
<td style="text-align: right;">36.72</td>
</tr>
<tr class="even">
<td style="text-align: left;">Leicester</td>
<td style="text-align: right;">62</td>
<td style="text-align: right;">169</td>
<td style="text-align: right;">36.69</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Chelsea</td>
<td style="text-align: right;">76</td>
<td style="text-align: right;">211</td>
<td style="text-align: right;">36.02</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tottenham</td>
<td style="text-align: right;">69</td>
<td style="text-align: right;">198</td>
<td style="text-align: right;">34.85</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Crystal Palace</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">147</td>
<td style="text-align: right;">34.01</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aston Villa</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">162</td>
<td style="text-align: right;">32.10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brentford</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">154</td>
<td style="text-align: right;">31.17</td>
</tr>
<tr class="even">
<td style="text-align: left;">Everton</td>
<td style="text-align: right;">43</td>
<td style="text-align: right;">138</td>
<td style="text-align: right;">31.16</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Arsenal</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">197</td>
<td style="text-align: right;">30.96</td>
</tr>
<tr class="even">
<td style="text-align: left;">Man United</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">187</td>
<td style="text-align: right;">30.48</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Newcastle</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">148</td>
<td style="text-align: right;">29.73</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wolves</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">136</td>
<td style="text-align: right;">27.94</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brighton</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">152</td>
<td style="text-align: right;">27.63</td>
</tr>
<tr class="even">
<td style="text-align: left;">Leeds</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">154</td>
<td style="text-align: right;">27.27</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Burnley</td>
<td style="text-align: right;">34</td>
<td style="text-align: right;">125</td>
<td style="text-align: right;">27.20</td>
</tr>
<tr class="even">
<td style="text-align: left;">Watford</td>
<td style="text-align: right;">34</td>
<td style="text-align: right;">127</td>
<td style="text-align: right;">26.77</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Southampton</td>
<td style="text-align: right;">43</td>
<td style="text-align: right;">170</td>
<td style="text-align: right;">25.29</td>
</tr>
<tr class="even">
<td style="text-align: left;">Norwich</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">109</td>
<td style="text-align: right;">21.10</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This bar plot shows the shot conversion rate by each team in the 2021-2022 season. Shot conversion rate is defined as the percentage of total goals a team scores divided by the total number of shots on target that a team has. This metric shows how effective a team is at scoring, with higher percentages meaning that when a team shoots, they will most likely score. From the plot, we see that Manchester City has the highest shot conversion rate of close to 40%. On the other hand, we see that Norwich has the lowest shot conversion rate of just over 20%.</p>
</section>
<section id="wrap-up" class="level2">
<h2 class="anchored" data-anchor-id="wrap-up">Wrap-Up</h2>
<p>In this blog post, many statistics surrounding goals were revealed in various visualizations. My personal favorite was the bar plot showing the shot conversion rate by each team because I found it fascinating how the top teams in the league had close to a 40% conversion rate. That number is pretty high and shows how the top teams that win the league score goals when given the chance to! If I had more time and more data, I would love to add the names of players who scored each of the goals in the season. I would love to see which players scored the most goals and to also see which months they tended to score more goals in and whether a pattern existed.</p>
<p>Overall, I really enjoyed data wrangling and creating visualizations with this data set. I liked how I had data from each match, so I could add the variability of the data to the error bar plots examining average goals scored and average goals conceded. I wasn’t able to do this with the previous holiday rating data set and I am glad that I was able to do this here. We learned in class that adding variability to a bar plot or to a lollipop plot allows the reader to see the distribution shape, sample size and any outliers that may be obscuring the data. With the error bars for example, you can see that Manchester City’s upper bound for goals scored and lower bound for goal scored is much larger than the other teams. You would not be able to tell this fact without the error bars added to the plot. In general, I believe that all of my visualizations effectively communicate the information because they are free of clutter, readable and informative. For example, I included text that displays the actual number of goals scored per month in addition to the scale on the x-axis because I think it helps with readability. I also added a table to display the total number of shots on target and the total number of goals scored by each team because it helps show the sample size for the shot conversion rate plot.</p>
<p>Thanks for reading!</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>